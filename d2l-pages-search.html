<!DOCTYPE html>

<head>
  <meta>
  <title>
    Course Search
  </title>
  <link href="css/surface_styles.css" rel="stylesheet">
  <link href="https://unpkg.com/tippy.js/dist/tippy.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
</head>

<body>
  <div class="g--12 nudge--left nudge--right">
    <!-- For side-to-side positioning, we use container -->
    <div class="container">
      <div class="card half-card g--6">
        <!-- OU Input Box -->
        <div class="flex ou-header">
          <h2>1. Course OUs</h2>
          <img id="ouHelper" class="help-image" src="resources/question-mark32.png" title="OU numbers or Organization Unit numbers are used by D2L as course ids.  This simply is the course id." /></div>
        <p>Enter Course OUs, or Drag and Drop a CSV into the box below</p>
        <div class="flex"><textarea id="textarea" placeholder="123456, 456789, 123789..."></textarea></div>
        <div class="flex ou-input"><button id="load-button" class="btn--raised">Load Courses</button></div>
      </div>
      <div class="card flex-column half-card loading-console g--6 nudge--left ">
        <!-- Course Status Box -->
        <h2>2. Load Status</h2>
        <p>Wait until all courses have finished loading before making a search</p>
        <div class="flex display-header"><span class="header">Course</span> <span class="header">Status</span></div>
        <div id="course-status-container" class="course-holder">
          <!-- Course Statuses from Handlebars: status.handlebars -->
        </div>
      </div>
    </div>
    <div id="searchCourses" class="card g--12">
      <!-- Search Courses box -->
      <h2>3. Search Courses</h2>
      <p>Page text and html queries are case-insensitive</p>
      <div class="g--4 m--5">
        <div class="flex" id="searchBox">
          <input id="search-input" class="search-input" type="text" placeholder="Search..." />
          <div class="radio-container">
            <label for="searchSettingRegex">RegEx</label>
            <input id="searchSettingRegex" type="checkbox" name="regex" />
            <img id="regexHelper" class="help-image" src="resources/question-mark32.png" />
            <div id="regexTooltipTemplate" style="display: none;">
              <p>RegEx or Regular Expressions are a special format of characters used to find exactly what you're looking for. <br />For more information about regular expressions, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener noreferrer">click here</a></p>
            </div>
          </div>
        </div>
        <!-- Containers for radio and searching/downloading buttons -->
        <div class="radio-container">
          <input id="searchSettingText" type="radio" name="search-type" value="Text" checked="checked" />
          <label for="searchSettingText">Page Text</label>
          <img id="textHelper" class="help-image" src="resources/question-mark32.png" title="Search courses by the text that is seen on each page." />
          <input id="searchSettingHTML" type="radio" name="search-type" value="HTML" />
          <label for="searchSettingHTML">HTML</label>
          <img id="htmlHelper" class="help-image" src="resources/question-mark32.png" title="Search courses including their HTML markup." />
          <input id="searchSettingCSS" type="radio" name="search-type" value="CSS" />
          <label for="searchSettingCSS">CSS Selector</label>
          <img id="cssHelper" class="help-image" src="resources/question-mark32.png" title="A CSS Selector is an expression used to gather specific groups of html elements." />
          <div id="cssTooltipTemplate" style="display: none;">
            <p>A CSS Selector is an expression used to gather specific groups of html elements. <br />For more information about CSS Selectors, <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Selectors" target="_blank" rel="noopener noreferrer">click here</a></p>
          </div>
        </div>
        <div class="flex search-download-buttons">
          <button id="search-and-display-button" class="btn--raised search-button">Search &amp; Display</button>
          <button id="search-and-download-button" class="btn--raised search-button">Search &amp; Download CSV</button> <img id="csvHelper" src="resources/question-mark32.png" class="help-image" title="CSV is a spreadsheet file that can be read by Microsoft Excel." /></div>
      </div>
    </div>
    <div class="card g--12" id="results-container">
      <!-- Results box -->
      <div class="flex results-header">
        <h2>4. Results</h2>
        <div>
          <button id="hideEmptyCourses" class="btn--raised disabled" disabled="disabled">Show Empty Courses</button>
          <button id="download-button" class="btn--raised disabled" disabled="disabled">Download CSV</button>
        </div>
      </div>
      <div id="stats" class="hidden">
        <p>Courses with Results: <span id="coursesStat"></span></p>
        <p>Total Results: <span id="totStat"></span></p>
        <p>Average Results per course: <span id="avgStat"></span></p>
        <p>Total Pages with Results: <span id="totPageStat"></span></p>
      </div>
      <div id="cssSelectorOptions" class="flex">
        <input id="resultSettingText" type="radio" name="selector-result-value" value="Text" />
        <label for="resultSettingText">Text</label>
        <input id="resultSettingTags" type="radio" name="selector-result-value" value="Tags" checked="checked" /> <label for="resultSettingTags">Tags</label> <input id="resultSettingHTML" type="radio" name="selector-result-value" value="FullHtml" />
        <label for="resultSettingHTML">Full HTML</label></div>
      <div id="results" class="g--12">
        <!-- Course Results from Handlebars: results.handlebars -->
      </div>
    </div>
    <div class="attributions">
      <p>Attributions</p>
      <p><a href="https://jquery.com/">jQuery</a>
        <a href="https://medialize.github.io/URI.js/">URI</a>
        <a href="https://caolan.github.io/async/">Async.js</a>
        <a href="http://handlebarsjs.com/">Handlebars</a>
        <a href="https://d3js.org/">d3</a>
        <a href="http://danml.com/download.html">download</a>
        <a href="https://ace.c9.io/">Ace</a>
        <a href="https://atomiks.github.io/tippyjs/">Tippy</a>
        <a href="http://jsbeautifier.org/">beautify_html</a>
        <a href="http://jsbeautifier.org/">beautify_css</a></p>
    </div>
  </div>
  <!-- External Libraries -->
  <p></p>
  <!-- jQuery, URI and async -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.18.10/URI.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/async/2.5.0/async.min.js"></script>
  <!-- d2lScrape, handlebars, d3, download, Ace editor and tippy -->
  <script src="https://rawgit.com/byuitechops/get-d2l-course-html-pages/master/d2lScrape.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.js" type="text/javascript"></script>
  <script src="https://d3js.org/d3-dsv.v1.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/downloadjs/1.4.7/download.min.js" type="text/javascript"></script>
  <script src="https://cdn.jsdelivr.net/ace/1.2.6/min/ace.js" type="text/javascript"></script>
  <script src="https://unpkg.com/tippy.js/dist/tippy.js" type="text/javascript"></script>
  <!-- beautify_html, beautify_css -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.6.4/beautify.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.6.4/beautify-css.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.6.4/beautify-html.min.js" type="text/javascript"></script>
  <!-- Handlebars templates and d2l-pages-search.js, which runs this application -->
  <script src="js/status.js" type="text/javascript"></script>
  <script src="js/results.js" type="text/javascript"></script>
  <script src="js/d2l-pages-search.js" type="text/javascript"></script>
</body>
